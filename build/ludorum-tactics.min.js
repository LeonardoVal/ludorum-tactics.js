//! ludorum-tactics 0.0.1

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","ludorum"],b):"object"==typeof module&&module.exports?module.exports=b(require("creatartis-base"),require("ludorum")):a.ludorum_gamepack=b(a.base,a.ludorum)}(this,function a(b,c){"use strict";{var d=b.declare,e=c.Game,f={__name__:"ludorum-tactics",__init__:a,__dependencies__:[b,c]},g=f.TacticsPiece=d({constructor:function(a,b,c,d,e,f,g){this.position=f,this.hp=a,this.damageRecibed=0,this.hitChance=b,this.saveChance=c,this.attackRange=d,this.movement=e,this.owner=g},clone:function(){var a=new g;return a.position=this.position,a.hp=this.hp,a.damageRecibed=this.damageRecibed,a.hitChance=this.hitChance,a.saveChance=this.saveChance,a.attackRange=this.attackRange,a.movement=this.movement,a.owner=this.owner,a},moves:function(a){},BresenhamLineAlgorithm:function(a,b){var c=this.position[0],d=this.position[1],e=b.position[0],f=b.position[1],g=Math.abs(e-c),h=e>c?1:-1,i=Math.abs(f-d);if(1>=g&&1>=i)return!0;for(var j=f>d?1:-1,k=(g>i?g:-i)/2;;){if(a.noViewTerrains.search(-1==a.terrain.square([c,d])))return!1;if(c===e&&d===f)break;var l=k;l>-g&&(k-=i,c+=h),i>l&&(k+=g,d+=j)}return!0},pieceInLineOfSight:function(a,b,c){switch(expression){case"bline":return v=this.BresenhamLineAlgorithm(a,b);default:return v=this.BresenhamLineAlgorithm(a,b)}},inLineOfSight:function(a,b,c){var d=new g;switch(d.position=b,expression){case"bline":return v=this.BresenhamLineAlgorithm(a,b);default:return v=this.BresenhamLineAlgorithm(a,b)}},possibleAttacks:function(a){var b=[];for(var c in a.pieces)c.owner!=this.owner&&c.hp>c.damageRecibed&&pieceInLineOfSight(a,c,"bline")&&(euqDist=Math.sqrt(Math.pow(this.position[0]-piec.position[0],2)+Math.pow(this.position[1]-piec.position[1],2)),euqDist<=this.attackRange&&(b[b.length+1]=c));return b},attack:function(a){a.suffer(hitChance)},suffer:function(a){this.damage+=a*(1-saveChance)}});f.TacticsGame=d(e,{players:["Left","Right"],name:"TacticsGame",noViewTerrains:"xo#",terrain:new c.utils.CheckerboardFromString(10,15,"...x..............x.....o............xxo..............#..............#.......oo#............oox..................oox........xx..................#....."),constructor:function(a,b){},moves:function(){},next:function(a){},result:function(){},generateThreatMap:function(){}})}return f});
//# sourceMappingURL=ludorum-tactics.min.js.map