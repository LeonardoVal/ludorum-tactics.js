//! ludorum-tactics 0.0.1

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","ludorum"],b):"object"==typeof module&&module.exports?module.exports=b(require("creatartis-base"),require("ludorum")):a.ludorum_gamepack=b(a.base,a.ludorum)}(this,function a(b,c){"use strict";{var d=b.declare,e=c.Game,f=b.raiseIf,g={__name__:"ludorum-tactics",__init__:a,__dependencies__:[b,c]};g.TacticsPiece=d({constructor:function(a,b,c,d,e,f,g){this.position=f,this.hp=a,this.hitChance=b,this.saveChance=c,this.attackRange=d,this.movement=e,this.viewDistance=g},moves:function(a){},pieceinLineOfSightbline:function(a,b,c){if(x0=this.position[0],y0=this.position[1],x1=b.position[0],y1=b.position[1],dx=Math.abs(x1-x0),sx=x0<x1?1:-1,dy=Math.abs(y1-y0),dx<=1&&dy<=1)return!0;for(sy=y0<y1?1:-1,err=(dx>dy?dx:-dy)/2;;){if(c.search(-1==a.terrain.square([x0,y0])))return!1;if(x0===x1&&y0===y1)break;e2=err,e2>-dx&&(err-=dy,x0+=sx),e2<dy&&(err+=dx,y0+=sy)}return!0},pieceInLineOfSight:function(a,b){},inLineOfSight:function(a,b){},possibleAttacks:function(a){},attack:function(a,b){},suffer:function(a){}}),g.TacticsGame=d(e,{players:["Left","Right"],name:"TacticsGame",terrain:new c.utils.CheckerboardFromString(10,15,"...x..............x.....o............xxo..............#..............#.......oo#............oox..................oox........xx..................#....."),constructor:function(a,b,c){e.call(this,a[b].owner),this.pieces=a,this.currentPiece=0|b,this.hasMoved=!!c},moves:function(){var a=this.pieces[this.currentPiece];return this.hasMoved?a.possibleAttacks(this):a.moves(this)},next:function(a){var b=this.pieces[this.currentPiece];if(f(!a.hasOwnProperty(b.owner),"Active player has no moves in ",JSON.stringify(a),"!"),!this.hasMoved){var c=this.pieces[this.currentPiece].clone();c.position=a[b.owner];var d=this.pieces.concat([]);return d[b]=c,new this.constructor(d,this.currentPiece,!0)}},result:function(){var a=this,b=a.players.map(function(b){return a.pieces.filter(function(a){return a.owner===b}).length>0});return 0===b[0]?a.defeat(this.players[0]):0===b[1]?a.defeat(this.players[1]):null},generateThreatMap:function(){}})}return g});
//# sourceMappingURL=ludorum-tactics.min.js.map